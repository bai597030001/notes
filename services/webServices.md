# Web service

`WebService`是一种跨编程语言和跨操作系统平台的远程调用技术。



https://juejin.im/post/5aadae4bf265da238a303917



## 引言



**什么是Service（服务）：**

传统上，我们把计算机后台程序（Daemon）提供的功能，称为"服务"（service）。	比如，让一个杀毒软件在后台运行，它会自动监控系统，那么这种自动监控就是一个"服务"。通俗地说，"服务"就是计算机可以提供的某一种功能。

根据来源的不同，"服务"又可以分成两种：一种是**"本地服务"**（使用同一台机器提供的服务，不需要网络），另一种是"**网络服务"**（使用另一台计算机提供的服务，必须通过网络才能完成）。而"网络服务"（Web Service）的本质，就是通过网络调用其他网站的资源。



**Web Service架构的基本思想，就是尽量把非核心功能交给其他人去做，自己全力开发核心功能。**比如，如果你要开发一个相册软件，完全可以使用Flickr的网络服务，把相片都储存到它上面，你只要全力做好相册本身就可以了。总体上看，凡是不属于你核心竞争力的功能，都应该把它"外包"出去。



**本地服务的缺陷**

> *　本地资源不足。很多数据和资料，本地得不到，只有向其他网站要。
>
> *　成本因素。本地提供服务，往往是不经济的，使用专业网站的服务更便宜。这里面涉及硬件和人员两部分，即使你买得起硬件，专门找一个人管理系统，也是很麻烦的事。
>
> *　可移植性差。如果你想把本机的服务，移植到其他机器上，往往很困难，尤其是在跨平台的情况下。



**Web Service的优势**

> *　平台无关。不管你使用什么平台，都可以使用Web service。
>
> *　编程语言无关。只要遵守相关协议，就可以使用任意编程语言，向其他网站要求Web service。这大大增加了web service的适用性，降低了对程序员的要求。
>
> *　对于Web service提供者来说，部署、升级和维护Web service都非常单纯，不需要考虑客户端兼容问题，而且一次性就能完成。
>
> *　对于Web service使用者来说，可以轻易实现多种数据、多种服务的聚合，因此能够做出一些以前根本无法想像的事情。



**Web service的发展趋势**

> *　在使用方式上，RPC和soap的使用在减少，Restful架构占到了主导地位。
>
> *　在数据格式上，XML格式的使用在减少，json等轻量级格式的使用在增多。
>
> *　在设计架构上，越来越多的第三方软件让用户在客户端（即浏览器），直接与云端对话，不再使用第三方的服务器进行中转或处理数据。



## 详解

**跨编程语言和跨操作平台**，就是说服务端程序采用java编写，客户端程序则可以采用其他编程语言编写，反之亦然！跨操作系统平台则是指服务端程序和客户端程序可以在不同的操作系统上运行。

**远程调用**，就是一台计算机a上的一个程序可以调用到另外一台计算机b上的一个对象的方法，譬如，银联提供给商场的pos刷卡系统，商场的POS机转账调用的转账方法的代码其实是跑在银行服务器上。再比如，amazon，天气预报系统，淘宝网，校内网，百度等把自己的系统服务以webservice服务的形式暴露出来，让第三方网站和程序可以调用这些服务功能，这样扩展了自己系统的市场占有率，往大的概念上吹，就是所谓的SOA应用。



## WebService平台技术

`XML+XSD，SOAP，WSDL`就是构成`WebService`平台的三大技术。



### xml

WebService采用HTTP协议传输数据，采用XML格式封装数据（即XML中说明调用远程服务对象的哪个方法，传递的参数是什么，以及服务对象的返回结果是什么）。XML是WebService平台中表示数据的格式。除了易于建立和易于分析外，XML主要的优点在于它既是平台无关的，又是厂商无关的。



### XSD

XML解决了数据表示的问题，但它没有定义一套标准的数据类型，更没有说怎么去扩展这套数据类型。例如，整形数到底代表什么？16位，32位，64位？这些细节对实现互操作性很重要。XML Schema(XSD)就是专门解决这个问题的一套标准。它定义了一套标准的数据类型，并给出了一种语言来扩展这套数据类型。WebService平台就是用XSD来作为其数据类型系统的。当你用某种语言(如VB，.NET或C#)来构造一个Web service时，为了符合WebService标准，所有你使用的数据类型都必须被转换为XSD类型。你用的工具可能已经自动帮你完成了这个转换，但你很可能会根据你的需要修改一下转换过程。



### SOAP

**Simple Object Access Protocol**(简单对象访问协议)

SOAP协议 = HTTP协议 + XML数据格式

WebService通过HTTP协议发送请求和接收结果时，发送的请求内容和结果内容都采用XML格式封装，并增加了一些特定的HTTP消息头，以说明HTTP消息的内容格式，这些特定的HTTP消息头和XML内容格式就是SOAP协议。SOAP提供了标准的RPC方法来调用Web Service。

SOAP协议定义了SOAP消息的格式，SOAP协议是基于HTTP协议的，SOAP也是基于XML和XSD的，XML是SOAP的数据编码方式。



### WSDL

**Web Service Description Language** – Web服务描述语言。

WebService客户端要调用一个WebService服务，首先要有知道这个服务的地址在哪，以及这个服务里有什么方法可以调用，所以，WebService务器端首先要通过一个WSDL文件来说明自己家里有哪些服务可以对外调用，服务是什么（服务中有哪些方法，方法接受的参数是什么，返回值是什么），服务的网络地址用哪个url地址表示，服务通过什么方式来调用。

WSDL就是这样一个基于XML的语言，用于描述Web Service及其函数、参数和返回值。它是WebService客户端和服务器端都能理解的标准格式。因为是基于XML的，所以WSDL既是机器可阅读的，又是人可阅读的，这将是一个很大的好处。一些最新的开发工具既能根据你的Web service生成WSDL文档，又能导入WSDL文档，生成调用相应WebService的代理类代码。

WSDL文件保存在Web服务器上，通过一个url地址就可以访问到它。客户端要调用一个WebService服务之前，要知道该服务的WSDL文件的地址。



WebService服务提供商可以通过两种方式来暴露它的WSDL文件地址：

> 1.注册到UDDI服务器，以便被人查找；
>
> 2.直接告诉给客户端调用者。



## Web service编程

https://juejin.im/post/5aadae4bf265da238a303917